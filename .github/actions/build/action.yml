name: Build executable
description: Build executable

runs:
  using: composite
  steps:
    - name: Set up Go
      uses: actions/setup-go@v5
      with:
        go-version: ${{ env.GO_VERSION }}

    - name: Setup bun
      uses: oven-sh/setup-bun@v2
      with:
        bun-version: ${{ env.BUN_VERSION }}

    - name: Run build script
      shell: sh
      run: make build

    - name: Upload artifact
      uses: actions/upload-artifact@v4
      if: github.event_name == 'push'
      with:
        name: traefik-mhos
        path: ./bin/traefik-mhos_*
